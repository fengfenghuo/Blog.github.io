# MongoDB和MySQL

|              | MongoDB                    | MySQL                                |
| ------------ | -------------------------- | ------------------------------------ |
| 数据库模型   | 非关系型                   | 关系型                               |
| 存储方式     | 虚拟内存+持久化            | 不同引擎有不同存储方式               |
| 查询语句     | 特有查询方式               | 传统SQL                              |
| 架构特点     | 副本集及分片实现高可用     | 常见有单点, M-S, MHA, MMM, Cluster等 |
| 数据处理方式 | 基于内存, 热数据存物理内存 | 不同引擎特点不同                     |
| 成熟度       | 新兴数据库, 成熟度较低     | 拥有较为成熟体系, 成熟度较高         |
| 广泛度       | MongoDB是NoSQL中较为完善DB | 份额很大                             |
|              |                            |                                      |

## 非关系型数据库-MongoDB

### 优势

1. 快速, 将热数据存储于物理内存中(不仅仅是索引和少部分数据), 使得热数据读写十分快速, 从而提高整体速度和效率;

2. 高扩展性, MongoDB的高可用于集群架构拥有十分高的拓展性, 通过增加物理机器, 以及增加分片, MongoDB可以达到十分惊人的拓展地步;

3. Failover机制, MongoDB的副本集配置中, 当主库遇到问题, 无法提供服务时, 副本集将选举出一个新的主库继续提供服务;

4. JSON的数据存储格式, 方便存储和查询

### 劣势

      1. 不支持事务;
      2. 开发文档不是很完善
      3. 占用空间比较大, 没有在线压缩功能, 频繁的数据删改时, 如果记录变了, 容易产生一些数据碎片, 导致索引出现性能问题, 需要定期重做索引

### 适用场景

1. 数据表结构变化较为频繁, 数据量特别大, 数据并发性特别高, 数据结构比较特别;
2. 以文档形式存储, 需要较好的代码亲和性(日志之类);
3. 设计之初就将原子性考虑其中, 无需事务之类的辅助

## 关系型数据库-MySQL

### 优势

1. 不同引擎上有不同存储方式;
2. 查询语句是传统SQL语句, 拥有成熟体系;
3. 开源数据库, 使用份额持续增长中

### 劣势

1. 处理海量数据效率显著变慢

## 对比

### 存储速度对比

MongoDB不指定`_id`> MySQL不指定主键 > MySQL指定主键 > MongoDB指定`_id`

> 1. 指定主键时, 都要对索引值进行处理, 查找数据库中是否存在相同键值
> 2. MongoDB不指定_id时, 通过计算机特征值, 时间, 进程ID于随机数保证_id唯一
> 3. MongoDB指定_id时, 每插入一条数据都要检查此_id是否可用, 当数据条目太多时会拖慢数据库插入速度
> 4. MongoDB会充分使用内存作为缓存
> 5. MySQL是稳定的数据库, 无论在指定主键还是不指定主键时, 其效率差不多

### 插入稳定性分析

> 插入稳定性是指, 随着数据量的增大, 每插入一定数据时的插入速率情况.

1. 相比较MySQL, MongoDB更适合读操作较重任务模型,MongoDB可以充分利用机器的内存资源.
2. MongoDB适合那些对数据具体格式不明确或者数据库格式经常变化的需求模型, 而且对开发者十分友好.
3. MongoDB自带分布式文件系统, 可以方便的部署到服务器集群上. 同时存在Shared的概念, 方便服务器分片使用. 每增加一台Shard, MongoDB插入性能也会以接近倍数的方式增长.
4. MongoDB自带对map-reduce运算框架的支持, 方便数据统计.